<div class="container">
  <form #registerForm="ngForm" (submit)="onSubmitHandler()">
    <fieldset>
      <h1>Registration Form</h1>

      <!-- USERNAME INPUT -->
      <p class="field field-icon">
        <label for="fullname"
          ><span><i class="fas fa-user"></i></span
        ></label>
        <input
          type="text"
          name="fullName"
          id="fullName"
          class="form-control"
          placeholder="Mark Ulrich"
          [(ngModel)]="userData.fullName"
          #fullName="ngModel"
          required
          pattern="^[A-Z][a-zA-Z]+ [A-Z][a-zA-Z]+$"
        />
      </p>

      <!-- USERNAME VALIDATION -->
      <div
        *ngIf="fullName.invalid && (fullName.dirty || fullName.touched)"
        class="alert alert-danger"
      >
        <div *ngIf="fullName.errors?.['required']">Full Name is required.</div>
        <div *ngIf="fullName.errors?.['pattern']">
          Full Name must contain two names (letters only) separated by a space.
          Both should start with a capital letter.
        </div>
      </div>

      <!-- EMAIL INPUT -->
      <p class="field field-icon">
        <label for="email"
          ><span><i class="fas fa-envelope"></i></span
        ></label>
        <input
          type="email"
          name="email"
          id="email"
          placeholder="marÐº@gmial.com"
          [(ngModel)]="userData.email"
          #email="ngModel"
          required
          email
        />
      </p>

      <!-- EMAIL VALIDATION -->
      <div
        *ngIf="email.invalid && (email.dirty || email.touched)"
        class="alert alert-danger"
      >
        <div *ngIf="email.errors?.['required']">Email is required.</div>
        <div *ngIf="email.errors?.['email']">
          Please enter a valid email address.
        </div>
      </div>

      <!-- TEL INPUT -->
      <p class="field field-icon">
        <label for="phoneNumber"
          ><span><i class="fas fa-phone"></i></span
        ></label>
        <select name="telCode" id="telCode" class="tel" ngModel>
          <option *ngFor="let code of telCodes" [value]="code">
            {{ code }}
          </option>
        </select>
        <input
          type="tel"
          name="phoneNumber"
          id="phoneNumber"
          class="form-control"
          placeholder="888 888"
          [(ngModel)]="userData.phoneNumber"
          #phoneNumber="ngModel"
          required
          pattern="[0-9]{9}"
        />
      </p>

      <!-- TEL VALIDATION -->
      <div
        *ngIf="
          phoneNumber.invalid && (phoneNumber.dirty || phoneNumber.touched)
        "
        class="alert alert-danger"
      >
        <div *ngIf="phoneNumber.errors?.['required']">
          Phone Number is required.
        </div>
        <div *ngIf="phoneNumber.errors?.['pattern']">
          Phone Number must be a 9-digit number.
        </div>
      </div>

      <!-- BUILDING INPUT -->
      <p class="field field-icon">
        <label for="building"
          ><span><i class="fas fa-building"></i></span
        ></label>
        <select name="building" id="building" class="building" ngModel>
          <option *ngFor="let building of buildings" [value]="building">
            {{ building }}
          </option>
        </select>
      </p>

      <!--** Password Group **-->
      <div ngModelGroup="passwords" #passwordsGroup="ngModelGroup">
        <!-- PASSWORD INPUT -->
        <p class="field field-icon">
          <label for="password"
            ><span><i class="fas fa-lock"></i></span
          ></label>
          <input
            type="password"
            name="password"
            id="password"
            placeholder="******"
            [(ngModel)]="userData.passwords.password"
            #password="ngModel"
            required
            minlength="3"
            maxlength="16"
            pattern="^[a-zA-Z0-9]+$"
          />
        </p>

        <!-- PASSWORD VALIDATION -->
        <div
          *ngIf="password.invalid && (password.dirty || password.touched)"
          class="alert alert-danger"
        >
          <div *ngIf="password.errors?.['required']">Password is required.</div>
          <div *ngIf="password.errors?.['minlength']">
            Password must be at least 3 characters long.
          </div>
          <div *ngIf="password.errors?.['maxlength']">
            Password cannot exceed 16 characters.
          </div>
          <div *ngIf="password.errors?.['pattern']">
            Password must contain only letters and digits.
          </div>
        </div>

        <!-- CONFIRM PASSWORD INPUT -->
        <p class="field field-icon">
          <label for="confirmPassword"
            ><span><i class="fas fa-lock"></i></span
          ></label>
          <input
            type="confirmPassword"
            name="confirmPassword"
            id="confirmPassword"
            placeholder="******"
            [(ngModel)]="userData.passwords.confirmPassword"
            #confirmPassword="ngModel"
            required
            minlength="3"
            maxlength="16"
            pattern="^[a-zA-Z0-9]+$"
            [ngClass]="{
              'is-invalid':
                registerForm.controls['passwords'].hasError(
                  'passwordMismatch'
                ) &&
                (confirmPassword.dirty || confirmPassword.touched)
            }"
          />
        </p>

        <!-- CONFIRM PASSWORD INPUT -->
        <div
          *ngIf="
            confirmPassword.invalid &&
            (confirmPassword.dirty || confirmPassword.touched)
          "
          class="alert alert-danger"
        >
          <div *ngIf="confirmPassword.errors?.['required']">
            Confirm Password is required.
          </div>
          <div *ngIf="confirmPassword.errors?.['minlength']">
            Confirm Password must be at least 3 characters long.
          </div>
          <div *ngIf="confirmPassword.errors?.['maxlength']">
            Confirm Password cannot exceed 16 characters.
          </div>
          <div *ngIf="confirmPassword.errors?.['pattern']">
            Confirm Password must contain only letters and digits.
          </div>
          <div
            *ngIf="
              registerForm.controls['passwords'].hasError('passwordMismatch') &&
              (confirmPassword.dirty || confirmPassword.touched)
            "
            class="alert alert-danger"
          >
            Passwords do not match.
          </div>
        </div>
      </div>

      <!-- <p
            *ngIf="form.get('passGroup')?.errors?.['matchPasswordsValidator'] ||
             form.get('passGroup')?.get('rePassword')?.errors?.['required']"
         -->

      <!-- Submit Button -->
      <p>
        <button type="submit" [disabled]="registerForm.invalid">
          Create Account
        </button>
      </p>

      <p class="text-center">
        Have an account?
        <a href="#">Log In</a>
      </p>
    </fieldset>
  </form>
</div>
